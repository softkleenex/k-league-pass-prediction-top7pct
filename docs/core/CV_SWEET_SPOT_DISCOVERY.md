# CV Sweet Spot 발견 - 2025-12-08

## 핵심 발견

**CV-Public Gap의 U-Shaped 관계 발견!**

13회 제출을 통해 CV와 Public Score 간의 비선형 관계를 발견했습니다.

---

## 발견 과정

### 제출 13: tuned_v1 (2025-12-08 00:30)

**의도:**
- min_samples 최적화 (Grid Search 15-35)
- scipy.optimize로 가중치 자동 최적화
- CV 낮추기 목표

**결과:**
- Fold 1-3 CV: **16.2557** (목표 달성!)
- Public: **16.3867** (현재 Best보다 나쁨!)
- Gap: **+0.1310** (예상 +0.03보다 훨씬 큼)

**문제:**
CV는 0.08 낮췄지만, Public은 오히려 0.02 나빠짐!

---

## CV-Public Gap 패턴 (13회 검증)

### Zone 1: CV < 16.27 (과최적화 구간) ❌

```
CV 16.26 → Public 16.39 (Gap +0.13) ❌ tuned_v1
CV 16.21 → Public 39.02 (Gap +22.8) ❌ ultra_ensemble

특징:
- min_samples 너무 낮음 (15-21)
- 노이즈 학습
- Public에서 일반화 실패
```

### Zone 2: CV 16.27-16.34 (SWEET SPOT) ✅

```
CV 16.27 → Public 16.35 (Gap +0.08) ✓
CV 16.28 → Public 16.36 (Gap +0.08) ✓
CV 16.32 → Public 16.46 (Gap +0.13) ✓
CV 16.34 → Public 16.36 (Gap +0.03) ✓✓✓ BEST!

특징:
- min_samples 20-30 (안정적)
- 좋은 일반화
- Gap 최소 (+0.03~+0.13)
```

### Zone 3: CV 16.35-16.36 (안정 구간) ✓

```
CV 16.36 → Public 16.36 (Gap ~0) ✓

특징:
- 약간 높지만 매우 안정
- Gap 거의 없음
```

---

## 원인 분석

### tuned_v1 실패 원인

**1. min_samples 과최적화**
```
tuned_v1:
- 5x5_8dir: 21 (원래 25)
- 6x6_8dir: 18 (원래 25)
- 7x7_8dir: 15 (원래 20)
→ 너무 낮음! 노이즈 학습

safe_fold13 (BEST):
- 5x5_8dir: 25 ✓
- 6x6_8dir: 25 ✓
- 7x7_8dir: 20 ✓
→ 보수적! 안정적!
```

**2. scipy.optimize 과최적화**
```
Fold 1-3 CV만으로 최적화
→ Fold 1-3에 과적합
→ Public 데이터와 불일치
```

**3. 분산 증가**
```
safe_fold13: 0.0059 (매우 안정)
tuned_v1:   0.0242 (덜 안정)
```

---

## 교훈

### 1. 잘못된 목표

```
❌ CV 낮추기
✅ Gap 최소화!

CV 16.26 (Gap +0.13) < CV 16.34 (Gap +0.03)
→ CV 16.34가 더 나은 모델!
```

### 2. min_samples 최적 범위

```
✅ 22-30: 안전 구간
⚠️ 18-21: 경계 구간
❌ < 18: 위험 구간 (과최적화!)
```

### 3. CV Sweet Spot

```
최적 CV 범위: 16.30-16.34

이 범위에서:
- 좋은 일반화
- 작은 Gap
- 안정적 성능
```

### 4. 단순함의 중요성

```
safe_fold13이 최고인 이유:
1. 보수적 min_samples (20-30)
2. 단순한 4개 모델
3. Inverse Variance Weighting
4. 극도로 낮은 분산 (0.0059)
```

---

## 수정된 전략

### 목표 재설정

```
이전 목표: Fold 1-3 CV 16.25-16.28 ❌
새 목표:   Fold 1-3 CV 16.30-16.32 ✅
```

### 개선 방향

**1. min_samples 보수적 유지**
- 22-28 범위
- 15-21 절대 금지!

**2. Gap 최소화 집중**
- CV보다 분산 최소화
- 단순한 모델 유지

**3. 검증 기준**
```
제출 전 체크:
✓ Fold 1-3 CV: 16.30-16.34
✓ Fold 분산: < 0.01
✓ min_samples: 22-30
✓ Gap 예상: < 0.05
```

---

## 다음 시도

### Phase 1A: 미세 조정 (안전)

```
목표: CV 16.30-16.32

전략:
1. min_samples 22-28 범위만
2. Zone 해상도 유지 (5x5, 6x6, 7x7)
3. 가중치 미세 조정
4. 분산 < 0.01 목표

예상: Public 16.33-16.36
```

### Phase 1B: 8x8 Zone (신중)

```
목표: CV 16.31-16.33

전략:
1. 8x8_8dir 추가 (min_samples 22)
2. 5개 모델 앙상블
3. Inverse Variance Weighting
4. 분산 모니터링

예상: Public 16.32-16.37
```

---

## 통계적 분석

### Linear Regression (CV vs Gap)

```
데이터: 상위 5개 모델
CV vs Gap:
- Slope: -0.27
- R²: 0.65

해석:
CV가 0.1 낮아질 때마다
Gap이 ~0.027 증가

하지만 U-shaped이므로
선형 모델은 부적절!
```

### Sweet Spot 범위

```
통계적 최적 CV: 16.32
95% 신뢰구간: [16.30, 16.34]

근거:
- 최소 Gap: CV 16.34 (Gap +0.03)
- 안정성: CV 16.27-16.34
- 분산: < 0.01
```

---

## 결론

**CV Sweet Spot (16.30-16.34)를 지켜라!**

1. CV를 무리하게 낮추지 말 것
2. min_samples 20-30 유지
3. Gap 최소화가 진짜 목표
4. 단순하고 안정적인 모델 선호

---

*발견일: 2025-12-08*
*검증: 13회 제출*
*현재 Best: safe_fold13 (CV 16.34, Public 16.36, Gap +0.03)*
