# ğŸ¤ Gemini í˜‘ì—… í”„ë¡œí† ì½œ (ê°œì„  ë²„ì „)

**ì‘ì„±ì¼:** 2025-12-17
**ê¸°ë°˜:** exp_034 ê²½í—˜

---

## ğŸ“‹ ì§€ê¸ˆê¹Œì§€ì˜ ë¬¸ì œì 

### âŒ ì‹¤íŒ¨ ì‚¬ë¡€ (exp_034)

1. **Gemini ì½”ë“œ ìˆ˜ì • ì‹¤íŒ¨**
   - ì§€ì‹œ: TEST ë°ì´í„° ë¡œë”© ë¡œì§ ìˆ˜ì •
   - ê²°ê³¼: ìˆ˜ì •í–ˆë‹¤ê³  ë³´ê³ í–ˆì§€ë§Œ ì‹¤ì œë¡œëŠ” ë¯¸ìˆ˜ì •
   - ì˜í–¥: Claudeê°€ ìˆ˜ë™ìœ¼ë¡œ ì¬ìˆ˜ì • í•„ìš”

2. **ê²€ì¦ ë¶€ì¬**
   - Gemini ì‘ì—… í›„ ì‹¤ì œ íŒŒì¼ ë³€ê²½ í™•ì¸ ì•ˆí•¨
   - ê²°ê³¼ë¬¼ ê²€ì¦ ì—†ì´ ë‹¤ìŒ ë‹¨ê³„ ì§„í–‰

3. **ìˆ˜ë™ ê°œì… í•„ìš”**
   - ì—ëŸ¬ ë°œìƒ ì‹œ Claudeê°€ ì§ì ‘ í•´ê²°
   - ìë™ ì¬ì‹œë„ ë©”ì»¤ë‹ˆì¦˜ ì—†ìŒ

---

## âœ… ê°œì„ ëœ í˜‘ì—… í”„ë¡œí† ì½œ

### 1ï¸âƒ£ Gemini ìœ„ì„ ë‹¨ê³„

```
Step 1: ì‘ì—… ëª…ì„¸ ì‘ì„± (WORK_WHILE_SLEEPING.md)
  â†“
Step 2: Gemini ì‹¤í–‰
  â†“
Step 3: ê²°ê³¼ ê²€ì¦ (CRITICAL!)
  â†“
Step 4A: ì„±ê³µ â†’ ë‹¤ìŒ ì‘ì—…
Step 4B: ì‹¤íŒ¨ â†’ Claude fallback
```

### 2ï¸âƒ£ ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸

**Gemini ì‘ì—… í›„ í•„ìˆ˜ ê²€ì¦:**

```python
# 1. íŒŒì¼ ë³€ê²½ í™•ì¸
- ìˆ˜ì •ëœ íŒŒì¼ì˜ timestamp ì²´í¬
- ìˆ˜ì • ì „/í›„ diff í™•ì¸

# 2. ì‹¤í–‰ ê²°ê³¼ í™•ì¸
- ë¡œê·¸ íŒŒì¼ ì¡´ì¬ ì—¬ë¶€
- ì—ëŸ¬ ì—†ì´ ì™„ë£Œë˜ì—ˆëŠ”ì§€
- ì˜ˆìƒ ì¶œë ¥ íŒŒì¼ ìƒì„± í™•ì¸

# 3. ë‚´ìš© ê²€ì¦
- ì¶œë ¥ íŒŒì¼ í¬ê¸° > 0
- í•„ìˆ˜ í•„ë“œ/ì»¬ëŸ¼ ì¡´ì¬
- ë°ì´í„° ê°œìˆ˜ ì¼ì¹˜
```

### 3ï¸âƒ£ ìë™ ëª¨ë‹ˆí„°ë§ í”„ë¡œí† ì½œ

**Exponential Backoff íŒ¨í„´:**

```bash
# ë°±ê·¸ë¼ìš´ë“œ ì‹¤í–‰
python script.py > log.txt 2>&1 &
PID=$!

# ìë™ ì²´í¬ (1 â†’ 2 â†’ 4 â†’ 8 â†’ 16ë¶„)
for wait in 1 2 4 8 16; do
  sleep ${wait}m

  # ì™„ë£Œ ì¡°ê±´ ì²´í¬
  if [[ -f result.json ]]; then
    echo "COMPLETED"
    # ìë™ìœ¼ë¡œ ë‹¤ìŒ ë‹¨ê³„ ì‹¤í–‰
    execute_next_step
    break
  fi

  # í”„ë¡œì„¸ìŠ¤ ì¡´ì¬ í™•ì¸
  if ! ps -p $PID > /dev/null; then
    echo "FAILED"
    # Claudeì—ê²Œ ì—ëŸ¬ ë³´ê³ 
    report_error
    break
  fi

  echo "RUNNING (next check in ${next}min)"
done
```

### 4ï¸âƒ£ ìë™ ì§„í–‰ í”„ë¡œí† ì½œ

**ì™„ë£Œ ê°ì§€ â†’ ìë™ ì‹¤í–‰:**

```python
def auto_workflow():
    """ìë™ ì›Œí¬í”Œë¡œìš° (ì‚¬ìš©ì ì…ë ¥ ëŒ€ê¸° ì—†ìŒ)"""

    # Step 1: í”¼ì²˜ ì¶”ì¶œ
    result1 = execute_step1()
    if not validate_step1(result1):
        return report_failure("Step 1")

    # Step 2: ëª¨ë¸ í•™ìŠµ (ìë™ ì‹œì‘!)
    result2 = execute_step2()
    if not validate_step2(result2):
        return report_failure("Step 2")

    # Step 3: ì¡°ê±´ë¶€ ì‹¤í–‰
    cv_score = result2['cv_mean']
    if cv_score < TARGET:
        # ìë™ìœ¼ë¡œ ì œì¶œ íŒŒì¼ ìƒì„±
        result3 = execute_step3()
        return report_success(result3)
    else:
        return report_cv_fail(cv_score)
```

---

## ğŸ”§ êµ¬ì²´ì  ê°œì„  ì‚¬í•­

### A. Gemini ì‘ì—… ê²€ì¦ ì¶”ê°€

**Before (exp_034):**
```python
# Geminiì—ê²Œ ìœ„ì„ë§Œ í•¨
gemini.execute("Fix TEST data loading")
# ê²°ê³¼ ê²€ì¦ ì—†ì´ ë‹¤ìŒ ì§„í–‰ âŒ
```

**After (ê°œì„ ):**
```python
# Geminiì—ê²Œ ìœ„ì„
gemini.execute("Fix TEST data loading")

# ê²€ì¦ 1: íŒŒì¼ ìˆ˜ì • í™•ì¸
if not file_changed("extract_advanced_features.py"):
    # Claudeê°€ ì§ì ‘ ìˆ˜ì •
    claude_fallback("extract_advanced_features.py")

# ê²€ì¦ 2: ì‹¤í–‰ í…ŒìŠ¤íŠ¸
test_result = run_quick_test()
if test_result.failed:
    # ì¬ì‹œë„ ë˜ëŠ” Claude fallback
    handle_failure()

# ê²€ì¦ 3: ì¶œë ¥ í™•ì¸
assert output_valid(), "Invalid output from Gemini"
```

### B. ì»¨í…ìŠ¤íŠ¸ ì ˆì•½ ìë™í™”

**ë¡œê·¸ í•„í„°ë§:**
```python
def report_to_claude(log_file, error_occurred):
    """Gemini â†’ Claude ë³´ê³  (ì»¨í…ìŠ¤íŠ¸ ì ˆì•½)"""

    if error_occurred:
        # ì—ëŸ¬ ì‹œ: ë§ˆì§€ë§‰ 50ì¤„ë§Œ
        return tail(log_file, 50)
    else:
        # ì„±ê³µ ì‹œ: ìš”ì•½ë§Œ
        return {
            "status": "SUCCESS",
            "files": list_output_files(),
            "metrics": extract_metrics(log_file)
        }
```

### C. ìë™ ì¬ì‹œë„ ë©”ì»¤ë‹ˆì¦˜

```python
def execute_with_retry(task, max_retries=2):
    """ìë™ ì¬ì‹œë„ (Gemini â†’ Claude fallback)"""

    for attempt in range(max_retries):
        if attempt == 0:
            # 1ì°¨ ì‹œë„: Gemini
            result = gemini.execute(task)
        else:
            # 2ì°¨ ì‹œë„: Claude ì§ì ‘ ì‹¤í–‰
            result = claude.execute(task)

        if validate(result):
            return result

        log(f"Attempt {attempt+1} failed, retrying...")

    raise Exception(f"Failed after {max_retries} attempts")
```

---

## ğŸ“Š ì›Œí¬í”Œë¡œìš° í…œí”Œë¦¿

### ì‹¤í—˜ ìë™ ì‹¤í–‰ í…œí”Œë¦¿

```markdown
# WORK_WHILE_SLEEPING.md

## ğŸ¯ ëª©í‘œ
[ì‹¤í—˜ ëª©í‘œ, ì˜ˆ: exp_034 ì‹¤í–‰ â†’ ì œì¶œ íŒŒì¼ ìƒì„±]

## ğŸ“‹ ì‘ì—… ë‹¨ê³„

### Step 1: [ì‘ì—…ëª…]
**ì‹¤í–‰:**
```bash
[ëª…ë ¹ì–´]
```

**ì™„ë£Œ ì¡°ê±´:**
- [ ] íŒŒì¼ X ìƒì„±
- [ ] ë¡œê·¸ì— "SUCCESS" ì¶œë ¥
- [ ] ë°ì´í„° ê°œìˆ˜ = N

**ê²€ì¦ ìŠ¤í¬ë¦½íŠ¸:**
```bash
[ê²€ì¦ ëª…ë ¹ì–´]
```

### Step 2: [ì‘ì—…ëª…] (ì¡°ê±´ë¶€)
**ì‹¤í–‰ ì¡°ê±´:**
- Step 1 ì„±ê³µ
- CV < 15.0

**ì‹¤í–‰:**
```bash
[ëª…ë ¹ì–´]
```

**ì™„ë£Œ ì¡°ê±´:**
- [ ] ...

## ğŸ¤– ìë™ ì‹¤í–‰ í”Œë˜ê·¸
- [ ] ì‚¬ìš©ì ì…ë ¥ ëŒ€ê¸° ì—†ìŒ
- [ ] ì—ëŸ¬ ì‹œ Claudeì—ê²Œ ë³´ê³ 
- [ ] ì„±ê³µ ì‹œ ìë™ìœ¼ë¡œ ë‹¤ìŒ ë‹¨ê³„

## ğŸ“Š ë³´ê³  í˜•ì‹
**ì„±ê³µ ì‹œ:**
```
âœ… [ì‘ì—…ëª…] ì™„ë£Œ
- íŒŒì¼: [ëª©ë¡]
- ë©”íŠ¸ë¦­: [í•µì‹¬ ì§€í‘œë§Œ]
```

**ì‹¤íŒ¨ ì‹œ:**
```
âŒ [ì‘ì—…ëª…] ì‹¤íŒ¨
- ì—ëŸ¬: [íƒ€ì…]
- ë¡œê·¸: [ë§ˆì§€ë§‰ 50ì¤„]
```
```

---

## ğŸ“ í•™ìŠµí•œ êµí›ˆ (exp_034)

### 1. Gemini í•œê³„ ì¸ì‹
- âœ… **ì˜í•˜ëŠ” ê²ƒ:** ê°„ë‹¨í•œ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰, ë¡œê·¸ ë¶„ì„
- âŒ **ëª»í•˜ëŠ” ê²ƒ:** ë³µì¡í•œ ì½”ë“œ ìˆ˜ì •, íŒŒì¼ í¸ì§‘
- ğŸ“Œ **ì „ëµ:** ë³µì¡í•œ ì‘ì—…ì€ Claudeê°€ ì§ì ‘

### 2. ê²€ì¦ì´ í•µì‹¬
- Gemini ë³´ê³ ë¥¼ ë¯¿ì§€ ë§ê³  **ì‹¤ì œ íŒŒì¼ í™•ì¸**
- ê° ë‹¨ê³„ë§ˆë‹¤ **ì¶œë ¥ ê²€ì¦ í•„ìˆ˜**

### 3. ìë™í™” ì¡°ê±´ ëª…í™•í™”
- "ì™„ë£Œ" ì¡°ê±´ì„ **íŒŒì¼ ì¡´ì¬**ë¡œ ëª…í™•íˆ
- "ì„±ê³µ" ì¡°ê±´ì„ **ë‚´ìš© ê²€ì¦**ìœ¼ë¡œ í™•ì¸

### 4. ì—ëŸ¬ ì²˜ë¦¬ ìë™í™”
- 1ì°¨ ì‹œë„: Gemini
- 2ì°¨ ì‹œë„: Claude fallback
- ëª¨ë“  ë‹¨ê³„ì—ì„œ **ì¬ì‹œë„ ê°€ëŠ¥**í•˜ê²Œ

---

## ğŸš€ ë‹¤ìŒ ì‹¤í—˜ ì‹œ ì ìš©

### Pre-flight ì²´í¬ë¦¬ìŠ¤íŠ¸

```
ì‹¤í—˜ ì‹œì‘ ì „:
[ ] WORK_WHILE_SLEEPING.md ì‘ì„±
[ ] ê° ë‹¨ê³„ë³„ ì™„ë£Œ ì¡°ê±´ ëª…í™•í™”
[ ] ê²€ì¦ ìŠ¤í¬ë¦½íŠ¸ ì¤€ë¹„
[ ] ìë™ ì§„í–‰ ì¡°ê±´ ì •ì˜

Gemini ìœ„ì„ ì‹œ:
[ ] ì‘ì—… ëª…ì„¸ êµ¬ì²´ì ìœ¼ë¡œ
[ ] ê²€ì¦ ë°©ë²• ëª…ì‹œ
[ ] ì‹¤íŒ¨ ì‹œ fallback ê³„íš

ìë™ ëª¨ë‹ˆí„°ë§:
[ ] Exponential backoff íŒ¨í„´
[ ] ì™„ë£Œ ì¡°ê±´ íŒŒì¼ ê¸°ë°˜
[ ] í”„ë¡œì„¸ìŠ¤ ìƒì¡´ í™•ì¸

ê²°ê³¼ ë³´ê³ :
[ ] ì„±ê³µ: ìš”ì•½ë§Œ (ì»¨í…ìŠ¤íŠ¸ ì ˆì•½)
[ ] ì‹¤íŒ¨: ë§ˆì§€ë§‰ 50ì¤„ë§Œ
[ ] ìë™ìœ¼ë¡œ ë‹¤ìŒ ë‹¨ê³„ ì§„í–‰
```

---

## ğŸ’¡ Best Practices

### DO âœ…
1. **ì‘ì—… ë‹¨ìœ„ ì‘ê²Œ:** í•œ ë²ˆì— í•œ ê°€ì§€ë§Œ
2. **ê²€ì¦ ìì£¼:** ê° ë‹¨ê³„ë§ˆë‹¤
3. **ìë™ ì§„í–‰:** ì™„ë£Œ ì¦‰ì‹œ ë‹¤ìŒ ë‹¨ê³„
4. **ë¡œê·¸ í•„í„°:** í•„ìš”í•œ ê²ƒë§Œ ì¶œë ¥
5. **ì¬ì‹œë„ ì¤€ë¹„:** Gemini ì‹¤íŒ¨ ëŒ€ë¹„

### DON'T âŒ
1. **Gemini ë§¹ì‹ :** ë°˜ë“œì‹œ ê²€ì¦
2. **ìˆ˜ë™ ëŒ€ê¸°:** ìë™ ëª¨ë‹ˆí„°ë§ í™œìš©
3. **ì „ì²´ ë¡œê·¸:** ì»¨í…ìŠ¤íŠ¸ ë‚­ë¹„
4. **ë³µì¡í•œ ì‘ì—…:** Geminiì—ê²Œ ìœ„ì„ ê¸ˆì§€
5. **ê²€ì¦ ìƒëµ:** ë‹¤ìŒ ë‹¨ê³„ ì „ í•„ìˆ˜ í™•ì¸

---

## ğŸ“ í…œí”Œë¦¿: ë‹¤ìŒ ì‹¤í—˜ ì‹œ

```markdown
# ì‹¤í—˜ëª…: exp_XXX

## 1. ëª©í‘œ
- [êµ¬ì²´ì  ëª©í‘œ, ì˜ˆ: CV < 14.5]

## 2. ë‹¨ê³„ë³„ ê³„íš
1. Step 1: [ì‘ì—…] (ì˜ˆìƒ ì‹œê°„)
   - ì™„ë£Œ ì¡°ê±´: [íŒŒì¼ëª…]
   - ê²€ì¦: [ë°©ë²•]
2. Step 2: [ì‘ì—…] (ì˜ˆìƒ ì‹œê°„)
   - ì¡°ê±´ë¶€ ì‹¤í–‰: [ì¡°ê±´]
   - ì™„ë£Œ ì¡°ê±´: [íŒŒì¼ëª…]

## 3. Gemini ìœ„ì„ vs Claude ì§ì ‘

| ì‘ì—… | ë‹´ë‹¹ | ì´ìœ  |
|------|------|------|
| ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ | Gemini | ë‹¨ìˆœ ì‹¤í–‰ |
| ì½”ë“œ ìˆ˜ì • | Claude | ë³µì¡í•œ ë¡œì§ |
| ë¡œê·¸ ë¶„ì„ | Gemini | íŒ¨í„´ ì°¾ê¸° |
| ì—ëŸ¬ ë””ë²„ê¹… | Claude | ë¬¸ì œ í•´ê²° |

## 4. ìë™ ì§„í–‰ ì¡°ê±´
- [ ] Step 1 ì™„ë£Œ â†’ Step 2 ìë™ ì‹œì‘
- [ ] CV < TARGET â†’ Step 3 ìë™ ì‹œì‘
- [ ] ì—ëŸ¬ ë°œìƒ â†’ Claude ë³´ê³ 

## 5. ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] íŒŒì¼ ìƒì„± í™•ì¸
- [ ] íŒŒì¼ í¬ê¸° > 0
- [ ] í•„ìˆ˜ í•„ë“œ ì¡´ì¬
- [ ] ë°ì´í„° ê°œìˆ˜ ì¼ì¹˜
```

---

**ì—…ë°ì´íŠ¸:** 2025-12-17 (exp_034 ê²½í—˜ ë°˜ì˜)
**ë‹¤ìŒ ê°œì„ :** exp_035 ì ìš© í›„ ì—…ë°ì´íŠ¸ ì˜ˆì •
